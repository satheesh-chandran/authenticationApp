(this["webpackJsonpauth-server-react"]=this["webpackJsonpauth-server-react"]||[]).push([[0],{18:function(e,t,a){e.exports=a(32)},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(16),r=a.n(c),o=(a(23),a(1)),u=a(3),s=a(2),i=(a(24),a(25),function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1];return l.a.createElement("div",{className:"topBar"},l.a.createElement("span",null,"Blog"),l.a.createElement("div",{className:"".concat(a?"hide":""," homeOptions")},l.a.createElement("button",{onClick:function(){return c(!0)}},"Logout")),l.a.createElement("div",{className:"".concat(a?"":"hide"," logoutPopup")},l.a.createElement("p",null,"Are you sure to logout ?"),l.a.createElement("div",{className:"logoutOptions"},l.a.createElement("button",{onClick:function(){return fetch("/api/logout").then((function(){document.location="/"}))}},"Yes"),l.a.createElement("button",{onClick:function(){return c(!1)}},"No"))))}),m=function(e){var t=Object(u.g)();if(null===e.user)return l.a.createElement(u.a,{to:"/login"});var a=[{path:"/",text:"All stories"},{path:"/myStories",text:"Your stories"},{path:"/addStory",text:"Add story"},{path:"/myApps",text:"Your apps"},{path:"/createApp",text:"Add app"}].map((function(e,t){return l.a.createElement(s.c,{to:e.path,activeClassName:"activeLink",exact:!0,key:"navLink_".concat(t)},e.text)}));return l.a.createElement("div",{className:"navbar"},l.a.createElement("p",{onClick:function(){return t.push("/user/".concat(e.user.id))}},"Hello ",e.user.name),a)},p=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(!1),m=Object(o.a)(i,2),p=m[0],d=m[1],E=Object(n.useState)(!0),h=Object(o.a)(E,2),b=h[0],f=h[1],v=Object(u.g)();if(Object(n.useEffect)((function(){fetch("/api/getMyApps").then((function(e){return e.json()})).then((function(e){if(e.protected)return v.push("/");r(e.apps),d(!0),f(!1)}))}),[p,v]),null===e.user)return l.a.createElement(u.a,{to:"/login"});if(b)return l.a.createElement("p",null,"Application details are loading");var g=c.map((function(e,t){var a=e.id,n=e.name;return l.a.createElement("div",{key:"apps_".concat(t),className:"appDiv"},l.a.createElement(s.b,{to:"/app/".concat(a)},n))}));return l.a.createElement("div",{className:"dashboard-container"},g)},d=function(e){return l.a.createElement("input",{placeholder:e.placeholder,value:e.value,onChange:function(t){e.updateChange(t.target.value)},type:e.type})},E=function(e,t){return fetch(e,function(e){return{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}}(t)).then((function(e){return e.json()}))},h=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),m=i[0],p=i[1],h=Object(u.g)();return null===e.user?l.a.createElement(u.a,{to:"/login"}):l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"addStory"},l.a.createElement("h3",null,"Add new story"),l.a.createElement(d,{placeholder:"Enter Title",value:c,updateChange:r,type:"text"}),l.a.createElement("textarea",{placeholder:"Enter content",cols:"100",rows:"15",value:m,onChange:function(e){return p(e.target.value)}}),l.a.createElement("button",{onClick:function(){E("/api/addStory",{title:c,body:m}).then((function(e){h.push("/story/".concat(e.storyId))}))}},"Add Story")))},b=function(){return l.a.createElement("div",{className:"topBar"},l.a.createElement("span",null,"Blog"),l.a.createElement("div",{className:"homeOptions"},l.a.createElement(s.b,{to:"/"},"Home")))},f=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),p=m[0],h=m[1],f=Object(n.useState)(!0),v=Object(o.a)(f,2),g=v[0],j=v[1],O=Object(n.useState)(!1),y=Object(o.a)(O,2),S=y[0],N=y[1];return null!==e.user?l.a.createElement(u.a,{to:"/"}):S?l.a.createElement("div",null,l.a.createElement(b,null),l.a.createElement("h3",null,"Login failed"),l.a.createElement(s.b,{to:"/login"},"Try again")):l.a.createElement("div",null,l.a.createElement(b,null),l.a.createElement("div",{className:"loginWindow"},l.a.createElement("h3",null,"Login To your account"),l.a.createElement("p",{className:g?"invisible":""},"Fields shouldn't be empty"),l.a.createElement("label",null,"Username ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John",type:"text",value:c,updateChange:r}),l.a.createElement("label",null,"Password ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John@123",type:"password",value:p,updateChange:h}),l.a.createElement("button",{onClick:function(){var e={username:c,password:p};if(!Object.values(e).every((function(e){return e})))return j(!1);E("/api/loginToApp",e).then((function(e){if(e.status)return document.location="/";N(!0)}))}},"Login"),l.a.createElement("span",{className:"signupQuestion"},"Do not have an account ?",l.a.createElement(s.b,{to:"/signup"},"Signup"))))},v=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),p=m[0],h=m[1],b=Object(n.useState)(""),f=Object(o.a)(b,2),v=f[0],g=f[1],j=Object(n.useState)(""),O=Object(o.a)(j,2),y=O[0],S=O[1],N=Object(n.useState)(!0),C=Object(o.a)(N,2),x=C[0],A=C[1],k=Object(n.useState)(!1),w=Object(o.a)(k,2),Y=w[0],D=w[1],I=Object(u.g)();return null===e.user?l.a.createElement(u.a,{to:"/login"}):Y?l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"createAppDiv"},l.a.createElement("h3",null,"Couldn't Register app"),l.a.createElement(s.b,{to:"/createApp"},"Try again"))):l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"createAppDiv"},l.a.createElement("h3",null,"Create you auth app"),l.a.createElement("p",{className:x?"invisible":""},"Fields shouldn't be empty"),l.a.createElement("label",null,"Application name ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:c,placeholder:"eg: authApp",type:"text",updateChange:r}),l.a.createElement("label",null,"Homepage url ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:p,placeholder:"eg: http://example.com",type:"text",updateChange:h}),l.a.createElement("label",null,"Application Description ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:y,placeholder:"eg: This is a nice app",type:"text",updateChange:S}),l.a.createElement("label",null,"Callback url ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:v,placeholder:"eg: /sample/path/",type:"text",updateChange:g}),l.a.createElement("button",{onClick:function(){var e={name:c,homePage:p,description:y,callbackUrl:v};if(!Object.values(e).every((function(e){return e})))return A(!1);E("/api/createApp",e).then((function(e){if(e.appId)return I.push("/app/".concat(e.appId));D(!0)}))}},"Register")))},g=a(10),j=a.n(g),O=function(e){var t=Object(n.useState)({responses:[]}),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(u.h)().id,i=Object(n.useState)(""),m=Object(o.a)(i,2),p=m[0],h=m[1],b=Object(n.useState)(!1),f=Object(o.a)(b,2),v=f[0],g=f[1],O=Object(u.g)();if(Object(n.useEffect)((function(){E("/api/getStory",{id:+s}).then((function(e){r(e)}))}),[v,s]),null===e.user)return l.a.createElement(u.a,{to:"/login"});var y=c.responses.map((function(e){return l.a.createElement("div",{className:"response",key:"response_".concat(e.id)},l.a.createElement("p",null,e.message),l.a.createElement("p",null,"Responded by,"," ",l.a.createElement("span",{className:"creator",onClick:function(){return O.push("/user/".concat(e.ownerId))}},e.username)),l.a.createElement("p",{className:"date"},j()(e.receivedAt).format("MMM Do YYYY, h:m:ss A")),l.a.createElement("button",{onClick:function(){return E("/api/deleteResponse",{id:e.id}).then((function(){g((function(e){return!e}))}))}},"Delete"))}));return l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"storyPage"},l.a.createElement("div",null,l.a.createElement("h2",null,c.title),l.a.createElement("p",null,"Creator: ",c.name),l.a.createElement("p",{className:"date"},j()(c.receivedAt).format("MMM Do YYYY, h:m:ss A")),l.a.createElement("button",{onClick:function(){return E("/api/deleteStory",{id:c.id}).then((function(){O.push("/")}))}},"Delete story")),l.a.createElement("div",{className:"body"},l.a.createElement("p",null,c.body)),l.a.createElement(d,{value:p,placeholder:"You can response to this story",updateChange:h,type:"text"}),l.a.createElement("button",{style:{marginTop:"1%"},onClick:function(){""!==p.trim()&&E("/api/addResponse",{storyId:+s,message:p}).then((function(){g((function(e){return!e})),h("")}))}},"Respond"),l.a.createElement("p",{style:{fontWeight:600}},"All responses"),l.a.createElement("div",null,y)))},y=function(e){var t=Object(u.g)();return l.a.createElement("div",{className:"story"},l.a.createElement(s.b,{to:"/story/".concat(e.story.id),style:{fontWeight:600}},e.story.title),l.a.createElement("p",null,"Creator :"," ",l.a.createElement("span",{className:"creator",onClick:function(){return t.push("/user/".concat(e.story.ownerId))}},e.story.name)),l.a.createElement("p",null,j()(e.story.receivedAt).format("MMM Do YYYY, h:m:ss A")))},S=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!0),i=Object(o.a)(s,2),m=i[0],p=i[1];return Object(n.useEffect)((function(){fetch("/api/myStories").then((function(e){return e.json()})).then((function(e){r(e),p(!1)}))}),[]),null===e.user?l.a.createElement(u.a,{to:"/login"}):m?l.a.createElement("p",null,"Story is is loading..."):l.a.createElement("div",{className:"dashboard-container"},c.map((function(e){return l.a.createElement(y,{story:e,key:"story_".concat(e.id)})})))},N=function(e){var t=Object(u.h)().id,a=Object(u.g)(),c=Object(n.useState)(null),r=Object(o.a)(c,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){E("/api/getAppDetails",{id:+t}).then((function(e){if(e.protected)return a.push("/");i(e.details)}))}),[t,a]),null===e.user?l.a.createElement(u.a,{to:"/login"}):null===s?l.a.createElement("div",{className:"dashboard-container"}):l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"appDetails"},l.a.createElement("h3",null,"App name: ",l.a.createElement("span",null,s.name)),l.a.createElement("h3",null,"Client Id: ",l.a.createElement("span",null,s.clientId)),l.a.createElement("h3",null,"Client Secret: ",l.a.createElement("span",null,s.clientSecret)),l.a.createElement("h3",null,"Description: ",l.a.createElement("span",null,s.description)),l.a.createElement("h3",null,"Homepage: ",l.a.createElement("span",null,s.homePage)),l.a.createElement("h3",null,"Callback url: ",l.a.createElement("span",null,s.callbackUrl)),l.a.createElement("h3",null,"Created at: ",l.a.createElement("span",null,"Few minutes ago")),l.a.createElement("button",{style:{width:"20%"}},"Transfer Ownership")))},C=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),p=m[0],h=m[1],f=Object(n.useState)(""),v=Object(o.a)(f,2),g=v[0],j=v[1],O=Object(n.useState)(""),y=Object(o.a)(O,2),S=y[0],N=y[1],C=Object(n.useState)(""),x=Object(o.a)(C,2),A=x[0],k=x[1],w=Object(n.useState)(!0),Y=Object(o.a)(w,2),D=Y[0],I=Y[1],T=Object(n.useState)(!1),M=Object(o.a)(T,2),J=M[0],L=M[1],P=Object(u.g)();return null!==e.user?l.a.createElement(u.a,{to:"/"}):J?l.a.createElement("div",null,l.a.createElement(b,null),l.a.createElement("h3",null,"Username already exists"),l.a.createElement(s.b,{to:"/signup"},"Try again")):l.a.createElement("div",null,l.a.createElement(b,null),l.a.createElement("div",{className:"loginWindow"},l.a.createElement("h3",null,"Create your account"),l.a.createElement("p",{className:D?"invisible":""},"Fields shouldn't be empty"),l.a.createElement("label",null,"Name ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John",type:"text",value:c,updateChange:r}),l.a.createElement("label",null,"Username ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John",value:p,type:"text",updateChange:h}),l.a.createElement("label",null,"Email ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John@example.com",value:g,type:"text",updateChange:j}),l.a.createElement("label",null,"Company ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:S,type:"text",placeholder:"eg: Example Pvt Ltd.",updateChange:N}),l.a.createElement("label",null,"Password ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John@123",value:A,type:"password",updateChange:k}),l.a.createElement("button",{onClick:function(){var e={name:c,username:p,password:A,email:g,company:S};if(!Object.values(e).every((function(e){return""!==e})))return I(!1);E("/api/signinToApp",e).then((function(e){if(e.status)return P.push("/");L(!0)}))}},"Signup"),l.a.createElement("span",{className:"signupQuestion"},"Have an account ?",l.a.createElement(s.b,{to:"/login"},"Login"))))},x=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!0),i=Object(o.a)(s,2),m=i[0],p=i[1];return Object(n.useEffect)((function(){return fetch("/api/allStories").then((function(e){return e.json()})).then((function(e){r(e),p(!1)})),function(){return p(!0)}}),[]),null===e.user?l.a.createElement(u.a,{to:"/login"}):m?l.a.createElement("div",{className:"dashboard-container"},"Stories are loading..."):l.a.createElement("div",{className:"dashboard-container"},c.map((function(e){return l.a.createElement(y,{story:e,key:"story_".concat(e.id)})})))},A=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(u.h)().id;if(Object(n.useEffect)((function(){E("/api/userDetails",{id:+s}).then(r)}),[s]),null===e.user)return l.a.createElement(u.a,{to:"/login"});if(!c)return l.a.createElement("div",null,"Content loading...");var i=c.name,m=c.username,p=c.email,d=c.company;return l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"profileBox"},l.a.createElement("p",null,"Name: ",l.a.createElement("span",null,i)),l.a.createElement("p",null,"Username: ",l.a.createElement("span",null,m)),l.a.createElement("p",null,"Email: ",l.a.createElement("span",null,p)),l.a.createElement("p",null,"Company: ",l.a.createElement("span",null,d))))},k=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!0),d=Object(o.a)(r,2),E=d[0],b=d[1];Object(n.useEffect)((function(){fetch("/isLoggedIn").then((function(e){return e.json()})).then((function(e){return e.loggedIn?c(e.userDetails):c(null),b(!1)}))}),[]);var g=[{path:"/myApps",component:p,exact:!0},{path:"/addStory",component:h,exact:!0},{path:"/app/:id",component:N,exact:!0},{path:"/createApp",component:v,exact:!0},{path:"/myStories",component:S,exact:!0},{path:"/story/:id",component:O,exact:!0},{path:"/user/:id",component:A,exact:!0},{path:"/",component:x,exact:!0}];if(E)return l.a.createElement("p",null,"Site is is loading...");var j=g.map((function(e,t){return l.a.createElement(u.b,{exact:e.exact,path:e.path,key:"dashboard_router".concat(t),children:l.a.createElement(e.component,{user:a})})}));return l.a.createElement("div",{className:"App"},l.a.createElement(s.a,null,l.a.createElement(u.d,null,l.a.createElement(u.b,{exact:!0,path:"/login",children:l.a.createElement(f,{user:a})}),l.a.createElement(u.b,{exact:!0,path:"/signup",children:l.a.createElement(C,{user:a})}),l.a.createElement("div",null,l.a.createElement(i,null),l.a.createElement("div",{className:"dashboard"},l.a.createElement(m,{user:a}),j)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.1231327c.chunk.js.map