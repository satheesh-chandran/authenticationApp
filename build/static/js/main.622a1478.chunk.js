(this["webpackJsonpauth-server-react"]=this["webpackJsonpauth-server-react"]||[]).push([[0],{18:function(e,t,a){e.exports=a(32)},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(16),r=a.n(c),o=(a(23),a(1)),s=a(2),u=a(3),i=(a(24),a(25),function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1];return l.a.createElement("div",{className:"topBar"},l.a.createElement("span",null,"Blog"),l.a.createElement("div",{className:"".concat(a?"hide":""," homeOptions")},l.a.createElement("button",{onClick:function(){return c(!0)}},"Logout")),l.a.createElement("div",{className:"".concat(a?"":"hide"," logoutPopup")},l.a.createElement("p",null,"Are you sure to logout ?"),l.a.createElement("div",{className:"logoutOptions"},l.a.createElement("button",{onClick:function(){return fetch("/api/logout").then((function(){document.location="/"}))}},"Yes"),l.a.createElement("button",{onClick:function(){return c(!1)}},"No"))))}),m=function(e){var t=Object(u.j)().url,a=[{path:"".concat(t),text:"All stories"},{path:"".concat(t,"/myStories"),text:"Your stories"},{path:"".concat(t,"/addStory"),text:"Add story"},{path:"".concat(t,"/myApps"),text:"Your apps"},{path:"".concat(t,"/createApp"),text:"Add app"}],n=Object(u.g)(),c=a.map((function(e,t){return l.a.createElement(s.c,{to:e.path,activeClassName:"activeLink",exact:!0,key:"navLink_".concat(t)},e.text)}));return l.a.createElement("div",{className:"navbar"},l.a.createElement("p",{onClick:function(){return n.push("/dashboard/user/".concat(e.user.id))}},"Hello ",e.user.name),c)},p=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(o.a)(r,2),m=i[0],p=i[1],d=Object(u.g)();Object(n.useEffect)((function(){fetch("/api/getMyApps").then((function(e){return e.json()})).then((function(e){if(e.protected)return d.push("/dashboard");c(e.apps),p(!0)}))}),[m,d]);var E=a.map((function(e,t){var a=e.id,n=e.name;return l.a.createElement("div",{key:"apps_".concat(t),className:"appDiv"},l.a.createElement(s.b,{to:"/dashboard/app/".concat(a)},n))}));return l.a.createElement("div",{className:"dashboard-container"},E)},d=function(e){return l.a.createElement("input",{placeholder:e.placeholder,value:e.value,onChange:function(t){e.updateChange(t.target.value)},type:e.type})},E=function(e,t){return fetch(e,function(e){return{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}}(t)).then((function(e){return e.json()}))},h=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(o.a)(r,2),i=s[0],m=s[1],p=Object(u.g)();return l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"addStory"},l.a.createElement("h3",null,"Add new story"),l.a.createElement(d,{placeholder:"Enter Title",value:a,updateChange:c,type:"text"}),l.a.createElement("textarea",{placeholder:"Enter content",cols:"100",rows:"15",value:i,onChange:function(e){return m(e.target.value)}}),l.a.createElement("button",{onClick:function(){E("/api/addStory",{title:a,body:i}).then((function(e){p.push("/dashboard/story/".concat(e.storyId))}))}},"Add Story")))},b=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),i=Object(o.a)(r,2),m=i[0],p=i[1],h=Object(n.useState)(""),b=Object(o.a)(h,2),f=b[0],v=b[1],j=Object(n.useState)(""),g=Object(o.a)(j,2),O=g[0],y=g[1],S=Object(n.useState)(!0),N=Object(o.a)(S,2),C=N[0],A=N[1],k=Object(n.useState)(!1),x=Object(o.a)(k,2),w=x[0],Y=x[1],D=Object(u.g)();return w?l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"createAppDiv"},l.a.createElement("h3",null,"Couldn't Register app"),l.a.createElement(s.b,{to:"/dashboard/createApp"},"Try again"))):l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"createAppDiv"},l.a.createElement("h3",null,"Create you auth app"),l.a.createElement("p",{className:C?"invisible":""},"Fields shouldn't be empty"),l.a.createElement("label",null,"Application name ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:a,placeholder:"eg: authApp",type:"text",updateChange:c}),l.a.createElement("label",null,"Homepage url ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:m,placeholder:"eg: http://example.com",type:"text",updateChange:p}),l.a.createElement("label",null,"Application Description ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:O,placeholder:"eg: This is a nice app",type:"text",updateChange:y}),l.a.createElement("label",null,"Callback url ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:f,placeholder:"eg: /sample/path/",type:"text",updateChange:v}),l.a.createElement("button",{onClick:function(){var e={name:a,homePage:m,description:O,callbackUrl:f};if(!Object.values(e).every((function(e){return e})))return A(!1);E("/api/createApp",e).then((function(e){if(e.appId)return D.push("/dashboard/app/".concat(e.appId));Y(!0)}))}},"Register")))},f=a(10),v=a.n(f),j=function(){var e=Object(n.useState)({responses:[]}),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(u.i)().id,s=Object(n.useState)(""),i=Object(o.a)(s,2),m=i[0],p=i[1],h=Object(n.useState)(!1),b=Object(o.a)(h,2),f=b[0],j=b[1],g=Object(u.g)();Object(n.useEffect)((function(){E("/api/getStory",{id:+r}).then((function(e){c(e)}))}),[f,r]);var O=a.responses.map((function(e){return l.a.createElement("div",{className:"response",key:"response_".concat(e.id)},l.a.createElement("p",null,e.message),l.a.createElement("p",null,"Responded by,"," ",l.a.createElement("span",{className:"creator",onClick:function(){return g.push("/dashboard/user/".concat(e.ownerId))}},e.username)),l.a.createElement("p",{className:"date"},v()(e.receivedAt).format("MMM Do YYYY, h:m:ss A")),l.a.createElement("button",{onClick:function(){return E("/api/deleteResponse",{id:e.id}).then((function(){j((function(e){return!e}))}))}},"Delete"))}));return l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"storyPage"},l.a.createElement("div",null,l.a.createElement("h2",null,a.title),l.a.createElement("p",null,"Creator: ",a.name),l.a.createElement("p",{className:"date"},v()(a.receivedAt).format("MMM Do YYYY, h:m:ss A")),l.a.createElement("button",{onClick:function(){return E("/api/deleteStory",{id:a.id}).then((function(){g.push("/dashboard")}))}},"Delete story")),l.a.createElement("div",{className:"body"},l.a.createElement("p",null,a.body)),l.a.createElement(d,{value:m,placeholder:"You can response to this story",updateChange:p,type:"text"}),l.a.createElement("button",{style:{marginTop:"1%"},onClick:function(){""!==m.trim()&&E("/api/addResponse",{storyId:+r,message:m}).then((function(){j((function(e){return!e})),p("")}))}},"Respond"),l.a.createElement("p",{style:{fontWeight:600}},"All responses"),l.a.createElement("div",null,O)))},g=function(e){var t=Object(u.g)();return l.a.createElement("div",{className:"story"},l.a.createElement(s.b,{to:"/dashboard/story/".concat(e.story.id),style:{fontWeight:600}},e.story.title),l.a.createElement("p",null,"Creator :"," ",l.a.createElement("span",{className:"creator",onClick:function(){return t.push("/dashboard/user/".concat(e.story.ownerId))}},e.story.name)),l.a.createElement("p",null,v()(e.story.receivedAt).format("MMM Do YYYY, h:m:ss A")))},O=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){fetch("/api/yourStories").then((function(e){return e.json()})).then(c)}),[]),l.a.createElement("div",{className:"dashboard-container"},a.map((function(e){return l.a.createElement(g,{story:e,key:"story_".concat(e.id)})})))},y=function(){var e=Object(u.i)().id,t=Object(u.g)(),a=Object(n.useState)(null),c=Object(o.a)(a,2),r=c[0],s=c[1];return Object(n.useEffect)((function(){E("/api/getAppDetails",{id:+e}).then((function(e){if(e.protected)return t.push("/dashboard");s(e.details)}))}),[e,t]),null===r?l.a.createElement("div",{className:"dashboard-container"}):l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"appDetails"},l.a.createElement("h3",null,"App name: ",l.a.createElement("span",null,r.name)),l.a.createElement("h3",null,"Client Id: ",l.a.createElement("span",null,r.clientId)),l.a.createElement("h3",null,"Client Secret: ",l.a.createElement("span",null,r.clientSecret)),l.a.createElement("h3",null,"Description: ",l.a.createElement("span",null,r.description)),l.a.createElement("h3",null,"Homepage: ",l.a.createElement("span",null,r.homePage)),l.a.createElement("h3",null,"Callback url: ",l.a.createElement("span",null,r.callbackUrl)),l.a.createElement("h3",null,"Created at: ",l.a.createElement("span",null,"Few minutes ago")),l.a.createElement("button",{style:{width:"20%"}},"Transfer Ownership")))},S=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!0),s=Object(o.a)(r,2),u=s[0],i=s[1];return Object(n.useEffect)((function(){return fetch("/api/allStories").then((function(e){return e.json()})).then((function(e){c(e),i(!1)})),function(){return i(!0)}}),[]),u?l.a.createElement("div",{className:"dashboard-container"},"Stories are loading..."):l.a.createElement("div",{className:"dashboard-container"},a.map((function(e){return l.a.createElement(g,{story:e,key:"story_".concat(e.id)})})))},N=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(u.i)().id;if(Object(n.useEffect)((function(){E("/api/userDetails",{id:+r}).then(c)}),[r]),!a)return l.a.createElement("div",null,"Content loading...");var s=a.name,i=a.username,m=a.email,p=a.company;return l.a.createElement("div",{className:"dashboard-container"},l.a.createElement("div",{className:"profileBox"},l.a.createElement("p",null,"Name: ",l.a.createElement("span",null,s)),l.a.createElement("p",null,"Username: ",l.a.createElement("span",null,i)),l.a.createElement("p",null,"Email: ",l.a.createElement("span",null,m)),l.a.createElement("p",null,"Company: ",l.a.createElement("span",null,p))))},C=function(e){var t=Object(u.h)(),a=[{path:"/dashboard",component:S},{path:"/dashboard/myApps",component:p},{path:"/dashboard/addStory",component:h},{path:"/dashboard/app/:id",component:y},{path:"/dashboard/createApp",component:b},{path:"/dashboard/myStories",component:O},{path:"/dashboard/story/:id",component:j},{path:"/dashboard/user/:id",component:N}].map((function(t,a){return l.a.createElement(u.b,{exact:!0,path:t.path,key:"dashboard_router".concat(a)},l.a.createElement(t.component,{user:e.user}))}));return l.a.createElement("div",null,l.a.createElement(i,null),l.a.createElement("div",{className:"dashboard"},l.a.createElement(m,{user:e.user}),l.a.createElement(u.d,{location:t},a)))},A=function(){return l.a.createElement("div",{className:"topBar"},l.a.createElement("span",null,"Blog"),l.a.createElement("div",{className:"homeOptions"},l.a.createElement(s.b,{to:"/"},"Home")))},k=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),u=Object(o.a)(r,2),i=u[0],m=u[1],p=Object(n.useState)(!0),h=Object(o.a)(p,2),b=h[0],f=h[1],v=Object(n.useState)(!1),j=Object(o.a)(v,2),g=j[0],O=j[1];return g?l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement("h3",null,"Login failed"),l.a.createElement(s.b,{to:"/login"},"Try again")):l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement("div",{className:"loginWindow"},l.a.createElement("h3",null,"Login To your account"),l.a.createElement("p",{className:b?"invisible":""},"Fields shouldn't be empty"),l.a.createElement("label",null,"Username ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John",type:"text",value:a,updateChange:c}),l.a.createElement("label",null,"Password ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John@123",type:"password",value:i,updateChange:m}),l.a.createElement("button",{onClick:function(){var e={username:a,password:i};if(!Object.values(e).every((function(e){return e})))return f(!1);E("/api/loginToApp",e).then((function(e){if(e.status)return document.location="/dashboard";O(!0)}))}},"Login"),l.a.createElement("span",{className:"signupQuestion"},"Do not have an account ?",l.a.createElement(s.b,{to:"/signup"},"Signup"))))},x=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),i=Object(o.a)(r,2),m=i[0],p=i[1],h=Object(n.useState)(""),b=Object(o.a)(h,2),f=b[0],v=b[1],j=Object(n.useState)(""),g=Object(o.a)(j,2),O=g[0],y=g[1],S=Object(n.useState)(""),N=Object(o.a)(S,2),C=N[0],k=N[1],x=Object(n.useState)(!0),w=Object(o.a)(x,2),Y=w[0],D=w[1],I=Object(n.useState)(!1),T=Object(o.a)(I,2),M=T[0],J=T[1],L=Object(u.g)();return M?l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement("h3",null,"Username already exists"),l.a.createElement(s.b,{to:"/signup"},"Try again")):l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement("div",{className:"loginWindow"},l.a.createElement("h3",null,"Create your account"),l.a.createElement("p",{className:Y?"invisible":""},"Fields shouldn't be empty"),l.a.createElement("label",null,"Name ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John",type:"text",value:a,updateChange:c}),l.a.createElement("label",null,"Username ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John",value:m,type:"text",updateChange:p}),l.a.createElement("label",null,"Email ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John@example.com",value:f,type:"text",updateChange:v}),l.a.createElement("label",null,"Company ",l.a.createElement("span",null,"*")),l.a.createElement(d,{value:O,type:"text",placeholder:"eg: Example Pvt Ltd.",updateChange:y}),l.a.createElement("label",null,"Password ",l.a.createElement("span",null,"*")),l.a.createElement(d,{placeholder:"eg: John@123",value:C,type:"password",updateChange:k}),l.a.createElement("button",{onClick:function(){var e={name:a,username:m,password:C,email:f,company:O};if(!Object.values(e).every((function(e){return""!==e})))return D(!1);E("/api/signinToApp",e).then((function(e){if(e.status)return L.push("/");J(!0)}))}},"Signup"),l.a.createElement("span",{className:"signupQuestion"},"Have an account ?",l.a.createElement(s.b,{to:"/login"},"Login"))))},w=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({}),i=Object(o.a)(r,2),m=i[0],p=i[1];return Object(n.useEffect)((function(){fetch("/isLoggedIn").then((function(e){return e.json()})).then((function(e){c(e.loggedIn),p(e.userDetails)}))}),[]),l.a.createElement("div",{className:"App"},l.a.createElement(s.a,null,l.a.createElement(u.d,null,l.a.createElement(u.b,{exact:!0,path:"/"},a?l.a.createElement(u.a,{to:"/dashboard"}):l.a.createElement(k,null)),l.a.createElement(u.b,{exact:!0,path:"/login"},a?l.a.createElement(u.a,{to:"/dashboard"}):l.a.createElement(k,null)),l.a.createElement(u.b,{exact:!0,path:"/signup"},a?l.a.createElement(u.a,{to:"/dashboard"}):l.a.createElement(x,null)),l.a.createElement(u.b,{path:"/dashboard"},a?l.a.createElement(C,{user:m}):l.a.createElement(u.a,{to:"/"})),l.a.createElement(u.a,{to:"/"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.622a1478.chunk.js.map